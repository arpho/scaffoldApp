{"version":3,"file":"src_app_modules_user_pages_signup_signup_module_ts.js","mappings":"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","sources":["./src/app/modules/user/pages/signup/signup.module.ts","./src/app/modules/user/pages/signup/signup.page.ts"],"sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\nimport { Routes, RouterModule } from '@angular/router';\n\nimport { IonicModule } from '@ionic/angular';\n\nimport { SignupPage } from './signup.page';\nimport { DynamicFormModule } from 'src/app/modules/dynamic-form/dynamic-form.module';\n\nconst routes: Routes = [\n  {\n    path: '',\n    component: SignupPage\n  }\n];\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ReactiveFormsModule,\n    IonicModule.forRoot(),\n    RouterModule.forChild(routes),\n    DynamicFormModule\n  ],\n  declarations: [SignupPage]\n})\nexport class SignupPageModule { }\n","import { Component, OnDestroy, OnInit } from '@angular/core';\nimport { AuthService } from '../../services/auth.service';\nimport { LoadingController, AlertController, ModalController } from '@ionic/angular';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { Router } from '@angular/router';\nimport { Subscriber, Subscription } from 'rxjs';\nimport { QuestionBase } from 'src/app/modules/dynamic-form/models/question-base';\nimport { TextboxQuestion } from 'src/app/modules/dynamic-form/models/question-textbox';\nimport { EmailQuestion } from 'src/app/modules/dynamic-form/models/question-email';\nimport { UserModel } from '../../models/userModel';\nimport { PasswordQuestion } from 'src/app/modules/dynamic-form/models/password-question';\nimport { UsersService } from '../../services/users.service';\nimport { servicesVersion } from 'typescript';\nimport { SwitchQuestion } from 'src/app/modules/item/models/question-switch';\nimport { CheckBoxQuestion } from 'src/app/modules/dynamic-form/models/question-checkBox';\nimport { configs } from 'src/app/configs/configs';\n@Component({\n  selector: 'app-signup',\n  templateUrl: './signup.page.html',\n  styleUrls: ['./signup.page.scss'],\n})\nexport class SignupPage implements OnInit, OnDestroy {\n  public signupForm: FormGroup;\n  public usersFields: any\n  public modal: any;\n  subscription: Subscription\n  user:UserModel\n  constructor(\n    public modalCtrl: ModalController,\n    private authService: AuthService,\n    private loadingCtrl: LoadingController,\n    private alertCtrl: AlertController,\n    private formBuilder: FormBuilder,\n    private router: Router,\n    public service:UsersService\n  ) {\n    this.usersFields = [new TextboxQuestion({\n      key: 'firstName',\n      label: 'nome',\n      required: true,\n      order: 1,\n      value:!configs.locked?\"Giuseppe\":''\n\n    }), new TextboxQuestion({\n      key: 'lastName',\n      label: 'cognome',\n      required: true,\n      order: 2,\n      value:!configs.locked?\"D'Amico\":''\n\n    }), new EmailQuestion({\n      key: 'email',\n      label: 'email',\n      required: true,\n      order: 3,\n      value:!configs.locked?\"damicogiuseppe77@gmail.com\":''\n\n    }),\n\n    new PasswordQuestion({\n      key: 'password',\n      label: 'password', required: configs.locked,\n      retypePassword: true,\n    }),\n  new CheckBoxQuestion({\n    key:\"GDPR\",\n    label:\"Autorizzazione alla gestione dei dati personali\",\n  text:\"Autorizzo il trattamento dei miei dati personali \"+\n  \" ai sensi dell’art. 13 del Decreto Legislativo 30 giugno 2003,\"+\n  \" n. 196 “Codice in materia di protezione dei dati personali” e dell’art. 13 del GDPR (Regolamento UE 2016/679).x\",\nrequired:true,\nvalue:!configs.locked,\nvalidator:Validators.requiredTrue\n})\n  ]\n    this.signupForm = this.formBuilder.group({\n      email: [\n        '',\n        Validators.compose([Validators.required, Validators.email]),\n      ],\n      password: [\n        '',\n        Validators.compose([Validators.minLength(6), Validators.required]),\n      ],\n    });\n  }\n  ngOnDestroy(): void {\n    if (this.subscription) {\n      this.subscription.unsubscribe()\n    }\n  }\n\n  ngOnInit() { }\n\n  filter(ev) {\n  }\n  dismiss(payment?) {\n    this.modalCtrl.dismiss(payment)\n  }\n\n  async submit(ev) {\n    this.user = new UserModel().load(ev)\n    this.user.password = configs.locked? ev.password.password:\"VilU7240#\"\n    this.user.email = ev.email\n    this.signupUser(this.signupForm, this.user)\n\n\n  }\n\n  async signupUser(signupForm: FormGroup, user: UserModel): Promise<void> {\n  \n      const email: string = signupForm.value.email.email;\n      const password: string = signupForm.value.password;\n      const successHandler = async () => {\n        await this.service.callCloudPushUser(user.serialize())\n        console.log('loading', this.modal)\n        this.modal.dismiss().then(() => {\n       \n\n        })\n      }\n      const complete = ()=>{\n        this.router.navigateByUrl('home');\n      }\n\n      const errorHandler = (error) => {\n        this.modal.dismiss().then(async () => {\n          const alert = await this.alertCtrl.create({\n            message: error.message?error.message:`utente ${user.getTitle().value} creato correttamente`,\n            buttons: [{ text: 'Ok', role: 'cancel' }],\n          });\n          await alert.present();\n          await alert.onDidDismiss()\n          this.router.navigateByUrl('home');\n          \n        });\n      }\n      this.authService.signupUser(user, successHandler, errorHandler,complete)\n\n      this.modal = await this.loadingCtrl.create();\n      await this.modal.present();\n    }\n  }\n\n"],"names":[],"sourceRoot":"webpack:///"}